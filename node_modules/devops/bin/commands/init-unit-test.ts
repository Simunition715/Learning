import fs from "fs-extra";
import path from "path";
import url from "url";

const __dirname = url.fileURLToPath(new URL(".", import.meta.url));

export default async function run() {
  // Check if the target project already has a ui folder
  if (fs.existsSync(path.resolve("unit-test"))) {
    throw new Error(
      "unit-test folder already exists in target project. Aborting..."
    );
  }

  // Path to the template folder
  const emptyUIProjectPath = path.resolve(
    __dirname,
    "../lib/template/empty-unit-test"
  );

  // Copy the contents of the target folder to the target project ui folder and
  // keep the folder structure in place.
  fs.copySync(emptyUIProjectPath, path.resolve("unit-test"));
}
