import fs from "fs-extra";
import path from "path";
import { chalk } from "../lib/util/chalk.js";

/**
 * Ensure any installations happen so the native project works on the current
 * developer's machine as well.
 */
async function ensureConfigured() {
  // Make sure there is a native project available
  if (
    !fs.existsSync(path.resolve("native")) ||
    !fs.existsSync(path.resolve("android"))
  ) {
    console.error(
      chalk.redBright(
        "Error: No native project found. Please run `npm run init native` first."
      )
    );
    process.exit(1);
  }
}

/**
 * This command starts up the development process for running native
 * applications.
 */
export default async function run() {
  // Ensure the native project is configured
  await ensureConfigured();
}
