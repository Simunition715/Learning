import shell from "shelljs";

/**
 * Returns all tags from the current git context in order.
 *
 * Returns void if the tags can not be determined.
 */
export async function gitOrderedTagList() {
  const result = shell.exec(
    "git for-each-ref --sort=creatordate --format '%(tag)' refs/tags"
  );

  if (result.code !== 0) {
    console.error("Failed to retrieve ordered tag list.");
    return void 0;
  }

  const allTags = (result.stdout || "").split("\n");
  return allTags;
}
