import shell from "shelljs";

/**
 * Retrieves the current branch in the current git context. Returns void if a
 * branch can not be determined.
 */
export async function gitCurrentBranch() {
  // Get the current branch name so we can obtain the hash of the ticket
  const result = shell.exec("git rev-parse --abbrev-ref HEAD");

  if (result.code !== 0) {
    console.error("Failed to determine current branch.");
    return void 0;
  }

  const branch = result.stdout.trim();
  return branch || void 0;
}
