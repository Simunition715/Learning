import inquirer from "inquirer";
import { fuzzySource } from "../util/fuzzy-source.js";

/**
 * Prompts user to select from a list of choices. If the selection does not
 * match choice, returns undefined.
 */
export async function promptSelect(
  message: string,
  choices: string[]
): Promise<string | undefined> {
  const { choice } = await inquirer.prompt([
    {
      type: "autocomplete",
      name: "choice",
      message,
      source: fuzzySource(choices),
    },
  ]);

  if (choices.indexOf(choice) < 0) {
    return void 0;
  }

  return choice;
}
