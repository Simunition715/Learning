const queue: any[][] = [];
let queueId: NodeJS.Timer | null = null;

function startQueue() {
  if (queueId !== null) return;

  queueId = setInterval(() => {
    while (queue.length > 0) {
      const message = queue.shift();
      if (message) {
        // eslint-disable-next-line no-console
        console.log(...message);
      }
    }
  }, 400);
}

/**
 * This is a simple queue for logging messages at given intervals which prevents
 * some logging infighting
 */
export function logQueue(...message: any[]) {
  queue.push(message);
  startQueue();
}
